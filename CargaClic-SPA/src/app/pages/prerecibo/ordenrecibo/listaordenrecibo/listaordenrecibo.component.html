
<div class="page-head">
  <!-- <h2 class="page-head-title">Mantenimiento de Usuarios del Sistema</h2> -->
  <!-- <nav aria-label="breadcrumb" role="navigation">
    <ol class="breadcrumb page-head-nav">
      <li class="breadcrumb-item"><a href="#">Home</a></li>
      <li class="breadcrumb-item active">Listado de Usuarios</li>
    </ol>
  </nav> -->
</div>

<div class="main-content container-fluid">
<div class="col-md-12">


  <div class="card card-border-color card-border-color-primary">
    <div class="card-header card-header-divider">
        
     <div class="row">
          <b> Ordenes de Recibo |  </b>  <span class="card-subtitle">   Listado de ordenes de recibo del sistema</span>
        </div>
      </div>
          <div class="search-div">
              <div class="input-container">
              <i class="fa fa-search"></i>
              <mat-form-field class="search-form-field" >
                <input matInput [(ngModel)]="searchKey" placeholder="Filtrar por Cliente y Número de Orden de Recibo" autocomplete="off" (keyup)="applyFilter()">
              </mat-form-field>
              </div>
          </div>
   
    
 
    <div class="card-body">
        <div  class="mat-elevation-z8">
            <mat-table #table [dataSource] = "listData" matSort >
               <!-- Checkbox Column -->
          <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef>
                 All
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox (click)="$event.stopPropagation()"
                              (change)="$event ? selection.toggle(row) : null"
                              [checked]="selection.isSelected(row)">
                </mat-checkbox>
              </td>
            </ng-container>
          
          
                <ng-container matColumnDef="Propietario">
                    <mat-header-cell *matHeaderCellDef mat-sort-header > Cliente Propietario </mat-header-cell>
                    <mat-cell *matCellDef="let user"> {{user.propietario}} </mat-cell>
                  </ng-container>
          
                  <!-- [style.color]="'#ff0000'" -->
          
                <ng-container matColumnDef="NumOrden">
                  <mat-header-cell *matHeaderCellDef mat-sort-header> N° Orden de Recibo   </mat-header-cell>
                  <mat-cell  *matCellDef="let orden" > 
                      <button class="btn btn-space btn-outline-primary" (click)="ver(orden.ordenReciboId)"  type="button">
                        <i class="mdi mdi-search"></i>
                      </button>
                  OR{{orden.numOrden}}  
                  </mat-cell>
                </ng-container>
          
                <ng-container matColumnDef="nombreEstado">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Estado  </mat-header-cell>
                    <mat-cell *matCellDef="let user"> 

                   <div *ngIf="user.nombreEstado == 'Planeado' then thenBlock else elseBlock"></div>
                  <ng-template #thenBlock>  <div  [style.color]="'#FFFFFF'" [style.background-color]="'#0c9811'">{{user.nombreEstado}}     </div>     </ng-template>
                  <ng-template #elseBlock>  <a  routerLink="/nuevoequipotransporte">Agregar</a>  </ng-template>  
                    </mat-cell>
                  </ng-container>


              <ng-container matColumnDef="EquipoTransporte">
                <mat-header-cell *matHeaderCellDef> Eq. Transporte </mat-header-cell>
                <mat-cell *matCellDef="let user"> 
                  <div *ngIf="user.EquipoTransportente then thenBlock else elseBlock"></div>
                  <ng-template #thenBlock>  <div  [style.color]="'#FFFFFF'" [style.background-color]="'#0c9811'">{{user.EquipoTransportente}}     </div>     </ng-template>
                  <ng-template #elseBlock>  
                   Sin equipo
                   </ng-template>  
                
                  <!-- {{user.dateOfBirth | date:'dd-MM-yyyy' }}  -->
                
                </mat-cell>
              </ng-container>
                
              <ng-container matColumnDef="Urgente">
                <mat-header-cell *matHeaderCellDef> Urgente </mat-header-cell>
                <mat-cell *matCellDef="let user">
                    <div *ngIf="user.urgente then thenBlock else elseBlock"></div>
                    <ng-template #thenBlock>  <div  [style.color]="'#FFFFFF'" [style.background-color]="'#0c9811'">Urgente     </div>     </ng-template>
                    <ng-template #elseBlock>Normal</ng-template>  
                </mat-cell>
              </ng-container>

                    <ng-container matColumnDef="FechaEsperada">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Fecha Esperada</mat-header-cell>
                        <mat-cell *matCellDef="let user"> 
                            {{user.fechaEsperada | date:'dd-MM-yyyy' }} 
                        </mat-cell>
                      </ng-container>


           
                  <ng-container matColumnDef="actionsColumn">
                      <mat-header-cell *matHeaderCellDef>
                          <div class="example-button-row">
                          <button mat-fab color="primary"  routerLink="/nuevaordenrecibo"> <i aria-hidden="true" class="fa fa-plus fa-1x"></i></button>
                          </div>
                          <!-- <button class="btn btn-space btn-primary" routerLink="/nuevousuario">Nuevo Usuario</button> -->
                      </mat-header-cell>
                      <mat-cell *matCellDef="let row">
                          <button class="btn btn-outline-primary" (click)="openDialog(row.id)" type="button"><i class="fas fa-running"></i></button>
                          <button class="btn btn-space btn-outline-primary" (click)="edit(row.id)"  type="button"><i class="icon mdi mdi-edit"></i></button>
                          <button class="btn  btn-outline-primary" (click)="open(row)" type="button"><i class="fa fa-trash"></i></button>
           
                      </mat-cell>
                  </ng-container>
         
          
            <mat-header-row *matHeaderRowDef="displayedColumns" ></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;" 
            [ngClass]="{'highlight': selectedRowIndex == row.id}"
            (click)="highlight(row)">



            </mat-row>
            
            
            
          
          
            </mat-table>


           <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="5" showFirstLastButtons></mat-paginator>

          </div>
    </div>
  </div>
</div>
</div>


<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" [template]="customLoadingTemplate"></ngx-loading>